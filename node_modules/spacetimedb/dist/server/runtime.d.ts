import * as _syscalls1_0 from 'spacetime:sys@1.0';
import * as _syscalls1_2 from 'spacetime:sys@1.2';
import type { ModuleHooks } from 'spacetime:sys@1.0';
import { ConnectionId } from '../lib/connection_id';
import { Identity } from '../lib/identity';
import { Timestamp } from '../lib/timestamp';
import { Uuid } from '../lib/uuid';
import { type JsonObject, type JwtClaims } from '../lib/reducers';
import { type UntypedSchemaDef } from '../lib/schema';
import type { DbView } from './db_view';
export declare const sys: Readonly<typeof _syscalls1_0 & typeof _syscalls1_2>;
export declare function parseJsonObject(json: string): JsonObject;
export declare const ReducerCtxImpl: {
    new <SchemaDef extends UntypedSchemaDef>(sender: Identity, timestamp: Timestamp, connectionId: ConnectionId | null): {
        "__#private@#identity": Identity | undefined;
        "__#private@#senderAuth": Readonly<{
            isInternal: boolean;
            hasJWT: boolean;
            jwt: JwtClaims | null;
        }> | undefined;
        "__#private@#uuidCounter": {
            value: number;
        } | undefined;
        sender: Identity;
        timestamp: Timestamp;
        connectionId: ConnectionId | null;
        db: DbView<SchemaDef>;
        get identity(): Identity;
        get senderAuth(): Readonly<{
            isInternal: boolean;
            hasJWT: boolean;
            jwt: JwtClaims | null;
        }>;
        /**
         * Create a new random {@link Uuid} `v4` using the {@link crypto} RNG.
         *
         * WARN: Until we use a spacetime RNG this make calls non-deterministic.
         */
        newUuidV4(): Uuid;
        /**
         * Create a new sortable {@link Uuid} `v7` using the {@link crypto} RNG, counter,
         * and the timestamp.
         *
         * WARN: Until we use a spacetime RNG this make calls non-deterministic.
         */
        newUuidV7(): Uuid;
    };
};
/**
 * Call into a user function `fn` - the backtrace from an exception thrown in
 * `fn` or one of its descendants in the callgraph will be stripped by host
 * code in `crates/core/src/host/v8/error.rs` such that `fn` will be shown to
 * be the root of the call stack.
 */
export declare const callUserFunction: <Args extends any[], R>(fn: (...args: Args) => R, ...args: Args) => R;
export declare const hooks: ModuleHooks;
export declare const hooks_v1_1: import('spacetime:sys@1.1').ModuleHooks;
export declare const hooks_v1_2: import('spacetime:sys@1.2').ModuleHooks;
//# sourceMappingURL=runtime.d.ts.map