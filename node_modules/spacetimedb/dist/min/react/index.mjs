import{fromByteArray as e}from"base64-js";import*as t from"react";import{createContext as i,useContext as r,useState as n,useRef as s,useCallback as a,useEffect as o,useSyncExternalStore as f}from"react";var c=class e{__time_duration_micros__;static MICROS_PER_MILLIS=1000n;static getAlgebraicType(){return p.Product({elements:[{name:"__time_duration_micros__",algebraicType:p.I64}]})}static isTimeDuration(e){if("Product"!==e.tag)return!1;const t=e.value.elements;if(1!==t.length)return!1;const i=t[0];return"__time_duration_micros__"===i.name&&"I64"===i.algebraicType.tag}get micros(){return this.__time_duration_micros__}get millis(){return Number(this.micros/e.MICROS_PER_MILLIS)}constructor(e){this.__time_duration_micros__=e}static fromMillis(t){return new e(BigInt(t)*e.MICROS_PER_MILLIS)}toString(){const e=this.micros,t=e<0?-e:e;return`${e<0?"-":"+"}${t/1000000n}.${String(t%1000000n).padStart(6,"0")}`}},u=class e{__timestamp_micros_since_unix_epoch__;static MICROS_PER_MILLIS=1000n;get microsSinceUnixEpoch(){return this.__timestamp_micros_since_unix_epoch__}constructor(e){this.__timestamp_micros_since_unix_epoch__=e}static getAlgebraicType(){return p.Product({elements:[{name:"__timestamp_micros_since_unix_epoch__",algebraicType:p.I64}]})}static isTimestamp(e){if("Product"!==e.tag)return!1;const t=e.value.elements;if(1!==t.length)return!1;const i=t[0];return"__timestamp_micros_since_unix_epoch__"===i.name&&"I64"===i.algebraicType.tag}static UNIX_EPOCH=new e(0n);static now(){return e.fromDate(new Date)}toMillis(){return this.microsSinceUnixEpoch/1000n}static fromDate(t){const i=t.getTime(),r=BigInt(i)*e.MICROS_PER_MILLIS;return new e(r)}toDate(){const t=this.__timestamp_micros_since_unix_epoch__/e.MICROS_PER_MILLIS;if(t>BigInt(Number.MAX_SAFE_INTEGER)||t<BigInt(Number.MIN_SAFE_INTEGER))throw new RangeError("Timestamp is outside of the representable range of JS's Date");return new Date(Number(t))}since(e){return new c(this.__timestamp_micros_since_unix_epoch__-e.__timestamp_micros_since_unix_epoch__)}},_=class e{__uuid__;static NIL=new e(0n);static MAX_UUID_BIGINT=0xffffffffffffffffffffffffffffffffn;static MAX=new e(e.MAX_UUID_BIGINT);constructor(t){if(t<0n||t>e.MAX_UUID_BIGINT)throw new Error("Invalid UUID: must be between 0 and `MAX_UUID_BIGINT`");this.__uuid__=t}static fromRandomBytesV4(t){if(16!==t.length)throw new Error("UUID v4 requires 16 bytes");const i=new Uint8Array(t);return i[6]=15&i[6]|64,i[8]=63&i[8]|128,new e(e.bytesToBigInt(i))}static fromCounterV7(t,i,r){if(4!==r.length)throw new Error("`fromCounterV7` requires `randomBytes.length == 4`");if(t.value<0)throw new Error("`fromCounterV7` uuid `counter` must be non-negative");if(i.__timestamp_micros_since_unix_epoch__<0)throw new Error("`fromCounterV7` `timestamp` before unix epoch");const n=t.value;t.value=n+1&2147483647;const s=0xffffffffffffn&i.toMillis(),a=new Uint8Array(16);return a[0]=Number(s>>40n&0xffn),a[1]=Number(s>>32n&0xffn),a[2]=Number(s>>24n&0xffn),a[3]=Number(s>>16n&0xffn),a[4]=Number(s>>8n&0xffn),a[5]=Number(0xffn&s),a[7]=n>>>23&255,a[9]=n>>>15&255,a[10]=n>>>7&255,a[11]=(127&n)<<1&255,a[12]|=127&r[0],a[13]=r[1],a[14]=r[2],a[15]=r[3],a[6]=15&a[6]|112,a[8]=63&a[8]|128,new e(e.bytesToBigInt(a))}static parse(t){const i=t.replace(/-/g,"");if(32!==i.length)throw new Error("Invalid hex UUID");let r=0n;for(let e=0;e<32;e+=2)r=r<<8n|BigInt(parseInt(i.slice(e,e+2),16));return new e(r)}toString(){const t=[...e.bigIntToBytes(this.__uuid__)].map(e=>e.toString(16).padStart(2,"0")).join("");return t.slice(0,8)+"-"+t.slice(8,12)+"-"+t.slice(12,16)+"-"+t.slice(16,20)+"-"+t.slice(20)}asBigInt(){return this.__uuid__}toBytes(){return e.bigIntToBytes(this.__uuid__)}static bytesToBigInt(e){let t=0n;for(const i of e)t=t<<8n|BigInt(i);return t}static bigIntToBytes(e){const t=new Uint8Array(16);for(let i=15;i>=0;i--)t[i]=Number(0xffn&e),e>>=8n;return t}getVersion(){const t=this.toBytes()[6]>>4&15;switch(t){case 4:return"V4";case 7:return"V7";default:if(this==e.NIL)return"Nil";if(this==e.MAX)return"Max";throw new Error(`Unsupported UUID version: ${t}`)}}getCounter(){const e=this.toBytes();return e[7]<<23|e[9]<<15|e[10]<<7|e[11]>>>1}compareTo(e){return this.__uuid__<e.__uuid__?-1:this.__uuid__>e.__uuid__?1:0}static getAlgebraicType(){return p.Product({elements:[{name:"__uuid__",algebraicType:p.U128}]})}},h=class{#e;#t;#i=0;constructor(e){this.#e=new Uint8Array(e),this.#t=new DataView(this.#e.buffer)}#r(e){const t=this.#i+e+1;if(t<=this.#e.length)return;let i=2*this.#e.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.#e),this.#e=r,this.#t=new DataView(this.#e.buffer)}toBase64(){return e(this.#e.subarray(0,this.#i))}getBuffer(){return this.#e.slice(0,this.#i)}get offset(){return this.#i}writeUInt8Array(e){const t=e.length;this.#r(4+t),this.writeU32(t),this.#e.set(e,this.#i),this.#i+=e.length}writeBool(e){this.#r(1),this.#t.setUint8(this.#i,e?1:0),this.#i+=1}writeByte(e){this.#r(1),this.#t.setUint8(this.#i,e),this.#i+=1}writeI8(e){this.#r(1),this.#t.setInt8(this.#i,e),this.#i+=1}writeU8(e){this.#r(1),this.#t.setUint8(this.#i,e),this.#i+=1}writeI16(e){this.#r(2),this.#t.setInt16(this.#i,e,!0),this.#i+=2}writeU16(e){this.#r(2),this.#t.setUint16(this.#i,e,!0),this.#i+=2}writeI32(e){this.#r(4),this.#t.setInt32(this.#i,e,!0),this.#i+=4}writeU32(e){this.#r(4),this.#t.setUint32(this.#i,e,!0),this.#i+=4}writeI64(e){this.#r(8),this.#t.setBigInt64(this.#i,e,!0),this.#i+=8}writeU64(e){this.#r(8),this.#t.setBigUint64(this.#i,e,!0),this.#i+=8}writeU128(e){this.#r(16);const t=e&BigInt("0xFFFFFFFFFFFFFFFF"),i=e>>BigInt(64);this.#t.setBigUint64(this.#i,t,!0),this.#t.setBigUint64(this.#i+8,i,!0),this.#i+=16}writeI128(e){this.#r(16);const t=e&BigInt("0xFFFFFFFFFFFFFFFF"),i=e>>BigInt(64);this.#t.setBigInt64(this.#i,t,!0),this.#t.setBigInt64(this.#i+8,i,!0),this.#i+=16}writeU256(e){this.#r(32);const t=BigInt("0xFFFFFFFFFFFFFFFF"),i=e&t,r=e>>BigInt(64)&t,n=e>>BigInt(128)&t,s=e>>BigInt(192);this.#t.setBigUint64(this.#i+0,i,!0),this.#t.setBigUint64(this.#i+8,r,!0),this.#t.setBigUint64(this.#i+16,n,!0),this.#t.setBigUint64(this.#i+24,s,!0),this.#i+=32}writeI256(e){this.#r(32);const t=BigInt("0xFFFFFFFFFFFFFFFF"),i=e&t,r=e>>BigInt(64)&t,n=e>>BigInt(128)&t,s=e>>BigInt(192);this.#t.setBigUint64(this.#i+0,i,!0),this.#t.setBigUint64(this.#i+8,r,!0),this.#t.setBigUint64(this.#i+16,n,!0),this.#t.setBigInt64(this.#i+24,s,!0),this.#i+=32}writeF32(e){this.#r(4),this.#t.setFloat32(this.#i,e,!0),this.#i+=4}writeF64(e){this.#r(8),this.#t.setFloat64(this.#i,e,!0),this.#i+=8}writeString(e){const t=(new TextEncoder).encode(e);this.writeU32(t.length),this.#r(t.length),this.#e.set(t,this.#i),this.#i+=t.length}},l=class{#t;#i=0;constructor(e){this.#t=new DataView(e.buffer,e.byteOffset,e.byteLength),this.#i=0}get offset(){return this.#i}get remaining(){return this.#t.byteLength-this.#i}#n(e){if(this.#i+e>this.#t.byteLength)throw new RangeError(`Tried to read ${e} byte(s) at relative offset ${this.#i}, but only ${this.remaining} byte(s) remain`)}readUInt8Array(){const e=this.readU32();return this.#n(e),this.readBytes(e)}readBool(){const e=this.#t.getUint8(this.#i);return this.#i+=1,0!==e}readByte(){const e=this.#t.getUint8(this.#i);return this.#i+=1,e}readBytes(e){const t=new Uint8Array(this.#t.buffer,this.#t.byteOffset+this.#i,e);return this.#i+=e,t}readI8(){const e=this.#t.getInt8(this.#i);return this.#i+=1,e}readU8(){return this.readByte()}readI16(){const e=this.#t.getInt16(this.#i,!0);return this.#i+=2,e}readU16(){const e=this.#t.getUint16(this.#i,!0);return this.#i+=2,e}readI32(){const e=this.#t.getInt32(this.#i,!0);return this.#i+=4,e}readU32(){const e=this.#t.getUint32(this.#i,!0);return this.#i+=4,e}readI64(){const e=this.#t.getBigInt64(this.#i,!0);return this.#i+=8,e}readU64(){const e=this.#t.getBigUint64(this.#i,!0);return this.#i+=8,e}readU128(){const e=this.#t.getBigUint64(this.#i,!0),t=this.#t.getBigUint64(this.#i+8,!0);return this.#i+=16,(t<<BigInt(64))+e}readI128(){const e=this.#t.getBigUint64(this.#i,!0),t=this.#t.getBigInt64(this.#i+8,!0);return this.#i+=16,(t<<BigInt(64))+e}readU256(){const e=this.#t.getBigUint64(this.#i,!0),t=this.#t.getBigUint64(this.#i+8,!0),i=this.#t.getBigUint64(this.#i+16,!0),r=this.#t.getBigUint64(this.#i+24,!0);return this.#i+=32,(r<<BigInt(192))+(i<<BigInt(128))+(t<<BigInt(64))+e}readI256(){const e=this.#t.getBigUint64(this.#i,!0),t=this.#t.getBigUint64(this.#i+8,!0),i=this.#t.getBigUint64(this.#i+16,!0),r=this.#t.getBigInt64(this.#i+24,!0);return this.#i+=32,(r<<BigInt(192))+(i<<BigInt(128))+(t<<BigInt(64))+e}readF32(){const e=this.#t.getFloat32(this.#i,!0);return this.#i+=4,e}readF64(){const e=this.#t.getFloat64(this.#i,!0);return this.#i+=8,e}readString(){const e=this.readUInt8Array();return new TextDecoder("utf-8").decode(e)}};function g(e){return Array.prototype.map.call(e.reverse(),e=>("00"+e.toString(16)).slice(-2)).join("")}function d(e){e.startsWith("0x")&&(e=e.slice(2));const t=e.match(/.{1,2}/g)||[];return Uint8Array.from(t.map(e=>parseInt(e,16))).reverse()}function m(e){return function(e){if(16!=e.length)throw new Error(`Uint8Array is not 16 bytes long: ${e}`);return new l(e).readU128()}(d(e))}function w(e){return function(e){if(32!=e.length)throw new Error(`Uint8Array is not 32 bytes long: [${e}]`);return new l(e).readU256()}(d(e))}function I(e){const t=new h(16);return t.writeU128(e),t.getBuffer()}function v(e){const t=new h(32);return t.writeU256(e),t.getBuffer()}var U=class e{__identity__;constructor(e){this.__identity__="string"==typeof e?w(e):e}static getAlgebraicType(){return p.Product({elements:[{name:"__identity__",algebraicType:p.U256}]})}isEqual(e){return this.toHexString()===e.toHexString()}equals(e){return this.isEqual(e)}toHexString(){return g(v(this.__identity__))}toUint8Array(){return v(this.__identity__)}static fromString(t){return new e(t)}static zero(){return new e(0n)}toString(){return this.toHexString()}},p={Ref:e=>({tag:"Ref",value:e}),Sum:e=>({tag:"Sum",value:e}),Product:e=>({tag:"Product",value:e}),Array:e=>({tag:"Array",value:e}),String:{tag:"String"},Bool:{tag:"Bool"},I8:{tag:"I8"},U8:{tag:"U8"},I16:{tag:"I16"},U16:{tag:"U16"},I32:{tag:"I32"},U32:{tag:"U32"},I64:{tag:"I64"},U64:{tag:"U64"},I128:{tag:"I128"},U128:{tag:"U128"},I256:{tag:"I256"},U256:{tag:"U256"},F32:{tag:"F32"},F64:{tag:"F64"},serializeValue(e,t,i,r){if("Ref"===t.tag){if(!r)throw new Error("cannot serialize refs without a typespace");for(;"Ref"===t.tag;)t=r.types[t.value]}switch(t.tag){case"Product":y.serializeValue(e,t.value,i,r);break;case"Sum":B.serializeValue(e,t.value,i,r);break;case"Array":if("U8"===t.value.tag)e.writeUInt8Array(i);else{const n=t.value;e.writeU32(i.length);for(const t of i)p.serializeValue(e,n,t,r)}break;case"Bool":e.writeBool(i);break;case"I8":e.writeI8(i);break;case"U8":e.writeU8(i);break;case"I16":e.writeI16(i);break;case"U16":e.writeU16(i);break;case"I32":e.writeI32(i);break;case"U32":e.writeU32(i);break;case"I64":e.writeI64(i);break;case"U64":e.writeU64(i);break;case"I128":e.writeI128(i);break;case"U128":e.writeU128(i);break;case"I256":e.writeI256(i);break;case"U256":e.writeU256(i);break;case"F32":e.writeF32(i);break;case"F64":e.writeF64(i);break;case"String":e.writeString(i)}},deserializeValue:function(e,t,i){if("Ref"===t.tag){if(!i)throw new Error("cannot deserialize refs without a typespace");for(;"Ref"===t.tag;)t=i.types[t.value]}switch(t.tag){case"Product":return y.deserializeValue(e,t.value,i);case"Sum":return B.deserializeValue(e,t.value,i);case"Array":if("U8"===t.value.tag)return e.readUInt8Array();{const r=t.value,n=e.readU32(),s=[];for(let t=0;t<n;t++)s.push(p.deserializeValue(e,r,i));return s}case"Bool":return e.readBool();case"I8":return e.readI8();case"U8":return e.readU8();case"I16":return e.readI16();case"U16":return e.readU16();case"I32":return e.readI32();case"U32":return e.readU32();case"I64":return e.readI64();case"U64":return e.readU64();case"I128":return e.readI128();case"U128":return e.readU128();case"I256":return e.readI256();case"U256":return e.readU256();case"F32":return e.readF32();case"F64":return e.readF64();case"String":return e.readString()}},intoMapKey:function(e,t){switch(e.tag){case"U8":case"U16":case"U32":case"U64":case"U128":case"U256":case"I8":case"I16":case"I32":case"I64":case"I128":case"I256":case"F32":case"F64":case"String":case"Bool":return t;case"Product":return y.intoMapKey(e.value,t);default:{const i=new h(10);return p.serializeValue(i,e,t),i.toBase64()}}}},y={serializeValue(e,t,i,r){for(const n of t.elements)p.serializeValue(e,n.algebraicType,i[n.name],r)},deserializeValue(e,t,i){const r={};if(1===t.elements.length){if("__time_duration_micros__"===t.elements[0].name)return new c(e.readI64());if("__timestamp_micros_since_unix_epoch__"===t.elements[0].name)return new u(e.readI64());if("__identity__"===t.elements[0].name)return new U(e.readU256());if("__connection_id__"===t.elements[0].name)return new b(e.readU128());if("__uuid__"===t.elements[0].name)return new _(e.readU128())}for(const n of t.elements)r[n.name]=p.deserializeValue(e,n.algebraicType,i);return r},intoMapKey(e,t){if(1===e.elements.length){if("__time_duration_micros__"===e.elements[0].name)return t.__time_duration_micros__;if("__timestamp_micros_since_unix_epoch__"===e.elements[0].name)return t.__timestamp_micros_since_unix_epoch__;if("__identity__"===e.elements[0].name)return t.__identity__;if("__connection_id__"===e.elements[0].name)return t.__connection_id__;if("__uuid__"===e.elements[0].name)return t.__uuid__}const i=new h(10);return p.serializeValue(i,p.Product(e),t),i.toBase64()}},B={serializeValue:function(e,t,i,r){if(2==t.variants.length&&"some"===t.variants[0].name&&"none"===t.variants[1].name)null!=i?(e.writeByte(0),p.serializeValue(e,t.variants[0].algebraicType,i,r)):e.writeByte(1);else if(2==t.variants.length&&"ok"===t.variants[0].name&&"err"===t.variants[1].name){let n,s,a;if("ok"in i?(n="ok",s=i.ok,a=0):(n="err",s=i.err,a=1),a<0)throw`Result serialization error: variant '${n}' not found in ${JSON.stringify(t)}`;e.writeU8(a),p.serializeValue(e,t.variants[a].algebraicType,s,r)}else{const n=i.tag,s=t.variants.findIndex(e=>e.name===n);if(s<0)throw`Can't serialize a sum type, couldn't find ${i.tag} tag ${JSON.stringify(i)} in variants ${JSON.stringify(t)}`;e.writeU8(s),p.serializeValue(e,t.variants[s].algebraicType,i.value,r)}},deserializeValue:function(e,t,i){const r=e.readU8();if(2==t.variants.length&&"some"===t.variants[0].name&&"none"===t.variants[1].name){if(0===r)return p.deserializeValue(e,t.variants[0].algebraicType,i);if(1===r)return;throw`Can't deserialize an option type, couldn't find ${r} tag`}if(2==t.variants.length&&"ok"===t.variants[0].name&&"err"===t.variants[1].name){if(0===r){return{ok:p.deserializeValue(e,t.variants[0].algebraicType,i)}}if(1===r){return{err:p.deserializeValue(e,t.variants[1].algebraicType,i)}}throw`Can't deserialize a result type, couldn't find ${r} tag`}{const n=t.variants[r],s=p.deserializeValue(e,n.algebraicType,i);return{tag:n.name,value:s}}}},b=class e{__connection_id__;constructor(e){this.__connection_id__=e}static getAlgebraicType(){return p.Product({elements:[{name:"__connection_id__",algebraicType:p.U128}]})}isZero(){return this.__connection_id__===BigInt(0)}static nullIfZero(e){return e.isZero()?null:e}static random(){function t(){return Math.floor(255*Math.random())}let i=BigInt(0);for(let e=0;e<16;e++)i=i<<BigInt(8)|BigInt(t());return new e(i)}isEqual(e){return this.__connection_id__==e.__connection_id__}equals(e){return this.isEqual(e)}toHexString(){return g(I(this.__connection_id__))}toUint8Array(){return I(this.__connection_id__)}static fromString(t){return new e(m(t))}static fromStringOrNull(t){const i=e.fromString(t);return i.isZero()?null:i}},F=i(void 0);function S(){const e=r(F);if(!e)throw new Error("useSpacetimeDB must be used within a SpacetimeDBProvider component. Did you forget to add a `SpacetimeDBProvider` to your component tree?");return e}function x({connectionBuilder:e,children:i}){const r=t.useRef(null),n=t.useCallback(()=>r.current,[]),[s,a]=t.useState({isActive:!1,identity:void 0,token:void 0,connectionId:b.random(),connectionError:void 0,getConnection:n});return t.useEffect(()=>{r.current||(r.current=e.build());const t=e=>{a(t=>({...t,isActive:e.isActive,identity:e.identity,token:e.token,connectionId:e.connectionId}))},i=e=>{a(t=>({...t,isActive:e.isActive}))},n=(e,t)=>{a(i=>({...i,isActive:e.isActive,connectionError:t}))};e.onConnect(t),e.onDisconnect(i),e.onConnectError(n);const s=r.current;return a(e=>({...e,isActive:s.isActive,identity:s.identity,token:s.token,connectionId:s.connectionId})),()=>{r.current?.removeOnConnect(t),r.current?.removeOnDisconnect(i),r.current?.removeOnConnectError(n),r.current?.disconnect(),r.current=null}},[e]),t.createElement(F.Provider,{value:s},i)}var A=(e,t)=>({type:"eq",key:e,value:t});function E(e,t){switch(e.type){case"eq":{const i=t[e.key];return("string"==typeof i||"number"==typeof i||"boolean"==typeof i)&&i===e.value}case"and":return 0===e.children.length||e.children.every(e=>E(e,t));case"or":return 0!==e.children.length&&e.children.some(e=>E(e,t))}}function T(e){return e.includes(" AND ")||e.includes(" OR ")?`(${e})`:e}function k(e,t){switch(t.type){case"eq":{const r=e.columns[t.key].columnMetadata.name??t.key;return`${i=r,/^[A-Za-z_][A-Za-z0-9_]*$/.test(i)?i:`"${i.replace(/"/g,'""')}"`} = ${function(e){switch(typeof e){case"string":return`'${e.replace(/'/g,"''")}'`;case"number":return Number.isFinite(e)?String(e):`'${String(e)}'`;case"boolean":return e?"TRUE":"FALSE"}}(t.value)}`}case"and":return T(t.children.map(t=>k(e,t)).join(" AND "));case"or":return T(t.children.map(t=>k(e,t)).join(" OR "))}var i}function D(e){return e}function V(e,t,i){const r=e.name,c=e.accessorName;let u;t&&"object"==typeof t&&"type"in t?u=t:i=t;const[_,h]=n(!1);let l;try{l=S()}catch{throw new Error("Could not find SpacetimeDB client! Did you forget to add a `SpacetimeDBProvider`? `useTable` must be used in the React component tree under a `SpacetimeDBProvider` component.")}const g=`SELECT * FROM ${r}`+(u?` WHERE ${k(e,u)}`:""),d=s(null),m=s(null),w=u?k(e,u):"",I=a(()=>{const e=l.getConnection();if(!e)return[[],!1];const t=e.db[c];return[u?Array.from(t.iter()).filter(e=>E(u,e)):Array.from(t.iter()),_]},[l,c,w,_]);o(()=>{const e=l.getConnection();if(l.isActive&&e){const t=e.subscriptionBuilder().onApplied(()=>{h(!0)}).subscribe(g);return()=>{t.unsubscribe()}}},[g,l.isActive,l]);const v=a(e=>{const t=(t,r)=>{u&&!E(u,r)||(i?.onInsert?.(r),t.event===d.current&&d.current||(d.current=t.event,m.current=I(),e()))},r=(t,r)=>{u&&!E(u,r)||(i?.onDelete?.(r),t.event===d.current&&d.current||(d.current=t.event,m.current=I(),e()))},n=(t,r,n)=>{const s=function(e,t,i){if(!e)return"stayIn";const r=E(e,t),n=E(e,i);return r&&!n?"leave":!r&&n?"enter":r&&n?"stayIn":"stayOut"}(u,r,n);switch(s){case"leave":i?.onDelete?.(r);break;case"enter":i?.onInsert?.(n);break;case"stayIn":i?.onUpdate?.(r,n);break;case"stayOut":return}t.event===d.current&&d.current||(d.current=t.event,m.current=I(),e())},s=l.getConnection();if(!s)return()=>{};const a=s.db[c];return a.onInsert(t),a.onDelete(r),a.onUpdate?.(n),()=>{a.removeOnInsert(t),a.removeOnDelete(r),a.removeOnUpdate?.(n)}},[l,c,w,i?.onDelete,i?.onInsert,i?.onUpdate]),U=a(()=>(m.current||(m.current=I()),m.current),[I]);return f(v,U,U)}function z(e){const{getConnection:t,isActive:i}=S(),r=e.accessorName,n=s([]);return o(()=>{const e=t();if(!e)return;const i=e.reducers[r];if(n.current.length){const e=n.current.splice(0);for(const t of e)i(...t)}},[t,r,i]),a((...e)=>{const i=t();if(!i)return void n.current.push(e);return(0,i.reducers[r])(...e)},[t,r])}export{x as SpacetimeDBProvider,A as eq,z as useReducer,S as useSpacetimeDB,V as useTable,D as where};//# sourceMappingURL=index.mjs.map